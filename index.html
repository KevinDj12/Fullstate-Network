<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fullstate Network</title>
    <link rel="icon" type="image/x-icon" href="Fullstate Network.ico">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background: linear-gradient(135deg, #f0f4f8, #d9e2ec);
            color: #333;
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden; /* Mencegah scroll horizontal pada body */
        }
        .header {
            background: #000000;
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .header .logo {
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: 1px;
        }
        .header .nav {
            display: flex;
            align-items: center;
        }
        .header .nav a {
            color: white;
            text-decoration: none;
            margin: 0 1rem;
            font-size: 1rem;
            transition: color 0.3s ease;
            cursor: pointer;
        }
        .header .nav a:hover {
            color: #facc15;
        }
        .header .nav a.active {
            color: #facc15;
            border-bottom: 2px solid #facc15;
        }
        .header .menu-toggle {
            display: none;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
        }
        .header .nav-menu {
            display: flex;
        }
        .header .search {
            display: flex;
            align-items: center;
        }
        .header .search input {
            padding: 0.5rem;
            border: none;
            border-radius: 20px 0 0 20px;
            outline: none;
            font-size: 0.9rem;
        }
        .header .search button {
            padding: 0.5rem 1rem;
            border: none;
            background: #facc15;
            color: #1e3a8a;
            border-radius: 0 20px 20px 0;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        .header .search button:hover {
            background: #eab308;
        }

        /* Container for horizontally sliding content */
        .main-content-wrapper {
            display: flex;
            flex-grow: 1;
            width: 100%; /* Will be set dynamically by JS based on pageOrder */
            transition: transform 0.5s ease-in-out; /* Animasi geser */
            overflow: hidden; /* Hide content that's not currently in view */
            height: auto; /* Allow height to adjust */
        }
        .main-content-wrapper.hidden {
            display: none; /* Hide when static content is active */
        }

        /* Container for static content (no slide animation) */
        .static-content-wrapper {
            display: none; /* Hidden by default */
            flex-grow: 1;
            width: 100%;
            height: auto; /* Allow height to adjust */
            padding: 4rem 0; /* Apply padding here to avoid affecting content width */
        }
        .static-content-wrapper.active {
            display: block; /* Show when active */
        }
        .static-content-wrapper .content {
            display: none; /* Hide all static content by default */
            width: 100%; /* Ensure static content takes full width */
            padding: 0 2rem; /* Apply horizontal padding here */
        }
        .static-content-wrapper .content.active {
            display: flex; /* Show active static content */
            flex-direction: column;
        }

        .content {
            display: flex; /* Keep flex for internal layout */
            flex-direction: column;
            flex-shrink: 0; /* Prevents pages from shrinking in main-content-wrapper */
            width: 100vw; /* Each page in main-content-wrapper takes full viewport width */
            padding: 4rem 2rem;
            text-align: center;
            height: fit-content;
            min-height: calc(100vh - 120px - 140px); /* Adjust height based on header/footer */
        }

        /* Specific padding adjustment for recruitment to align with other content */
        #recruitment.content {
            padding-top: 0; /* Remove top padding as it's added by static-content-wrapper */
            padding-bottom: 0; /* Remove bottom padding */
        }

        .hero {
            background: #191919;
            color: white;
            text-align: center;
            padding: 5rem 2rem;
            position: relative;
        }
        .hero h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        .hero p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        .hero .buttons {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
        }
        .hero .buttons button {
            padding: 0.75rem 2rem;
            font-size: 1.1rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .hero .buttons .check-btn {
            background: #c80000;
            color: white;
        }
        .hero .buttons button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        .services {
            padding: 4rem 2rem;
            text-align: center;
        }
        .services h2 {
            font-size: 2.5rem;
            margin-bottom: 2rem;
            color: #1e3a8a;
            font-weight: 600;
        }
        .services .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        .services .card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        .services .card:hover {
            transform: translateY(-5px);
        }
        .services .card img {
            width: 60px;
            margin-bottom: 1rem;
        }
        .services .card h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: #1e3a8a;
        }
        .services .card p {
            font-size: 1rem;
            color: #666;
        }
        .announcements {
            padding: 4rem 2rem;
            text-align: center;
        }
        .announcements h2 {
            font-size: 2.5rem;
            margin-bottom: 2rem;
            color: #1e3a8a;
            font-weight: 600;
        }
        .announcements .grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
            max-width: 800px;
            margin: 0 auto;
        }
        .announcements .card {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        .announcements .card:hover {
            transform: translateY(-5px);
        }
        .announcements .card img {
            width: 100%;
            height: auto;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            max-height: 400px;
        }
        .announcements .card p {
            font-size: 1.1rem;
            color: #666;
            line-height: 1.6;
            word-wrap: break-word;
            overflow-wrap: break-word;
            word-break: break-word;
            max-width: 100%;
            text-align: center;
        }
        .news-list {
            padding: 4rem 2rem;
            text-align: center;
            background: #e6effb;
        }
        .news-list h2 {
            font-size: 2.5rem;
            margin-bottom: 2rem;
            color: #1e3a8a;
        }
        .news-list .news-items {
            display: block;
            max-width: 1200px;
            margin: 0 auto;
        }
        .news-item {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            background: white;
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        .news-item:hover {
            transform: translateY(-3px);
        }
        .news-item img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 50%;
            margin-right: 1rem;
        }
        .news-item .info {
            text-align: left;
            flex-grow: 1;
        }
        .news-item .info span.category {
            font-size: 0.8rem;
            color: #1e3a8a;
            margin-bottom: 0.2rem;
            display: block;
        }
        .news-item .info span.date {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 0.2rem;
            display: block;
        }
        .news-item .info h3 {
            font-size: 1.2rem;
            color: #1e3a8a;
            margin-bottom: 0.3rem;
        }
        .news-item .info p {
            font-size: 0.9rem;
            color: #666;
        }
        .news-item button.delete-btn {
            padding: 0.25rem 0.75rem;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: background 0.3s ease;
            display: none;
        }
        .news-item button.delete-btn.visible {
            display: block;
        }
        .news-item button.delete-btn:hover {
            background: #dc2626;
        }
        .news-detail {
            padding: 0; /* Remove padding here, handled by static-content-wrapper */
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            min-height: calc(100vh - 300px);
            overflow-y: auto;
        }
        .news-detail .button-group {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }
        .news-detail .back-btn {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: #3b82f6;
            color: white;
            text-decoration: none;
            border-radius: 20px;
            cursor: pointer;
            text-align: left;
            width: fit-content;
        }
        .news-detail .back-btn:hover {
            background: #2563eb;
        }
        .news-detail .delete-btn {
            display: none;
            padding: 0.5rem 1rem;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        .news-detail .delete-btn.visible {
            display: inline-block;
        }
        .news-detail .delete-btn:hover {
            background: #dc2626;
        }
        .news-detail img {
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 1rem;
        }
        .news-detail h3 {
            font-size: 1.8rem;
            color: #1e3a8a;
            margin-bottom: 0.5rem;
        }
        .news-detail p {
            font-size: 1rem;
            color: #666;
            line-height: 1.8;
            text-align: left;
            flex: 1 0 auto;
            overflow-wrap: break-word;
        }
        .admin {
            padding: 4rem 2rem;
            text-align: center;
            background: #e6effb;
        }
        .admin h2 {
            font-size: 2.5rem;
            margin-bottom: 2rem;
            color: #1e3a8a;
        }
        .admin .add-news {
            display: none;
            margin-bottom: 2rem;
            text-align: left;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            background: white;
            padding: 1rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .admin .add-news.active {
            display: block;
        }
        .admin .add-news select, .admin .add-news input, .admin .add-news textarea {
            display: block;
            width: 100%;
            padding: 0.5rem;
            margin-bottom: 1rem;
            border: 1px solid #ccc;
            border-radius: 5px;
            outline: none;
        }
        .admin .add-news p {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 1rem;
            line-height: 1.4;
        }
        .admin .add-news button {
            padding: 0.5rem 1rem;
            background: #c80000;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        .admin .add-news button:hover {
            background: #960000;
        }
        .admin .news-list {
            max-width: 800px;
            margin: 0 auto;
            margin-top: 2rem;
        }
        .admin .news-list .news-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .admin .news-list .news-item .info {
            text-align: left;
            flex-grow: 1;
        }
        .admin .news-list .news-item button {
            padding: 0.25rem 0.75rem;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        .admin .news-list .news-item button:hover {
            background: #dc2626;
        }
        .admin .logout-btn {
            padding: 0.5rem 1rem;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: background 0.3s ease;
            margin-top: 2rem;
        }
        .admin .logout-btn:hover {
            background: #dc2626;
        }
        .profile, .community {
            padding: 4rem 2rem;
            text-align: center;
        }
        .recruitment { /* No padding on this element, parent static-content-wrapper handles it */
            text-align: center;
        }
        .profile h2, .community h2, .recruitment h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: #1e3a8a;
        }
        .profile p, .community p, .recruitment p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
            color: #666;
        }
        .profile .profile-highlight {
            display: block;
            max-width: 800px;
            margin: 2rem auto 0 auto;
        }
        .profile .profile-highlight .news-item {
            cursor: default;
            pointer-events: none;
        }
        .recruitment .job-listings {
            margin-top: 2rem;
        }
        .recruitment .job-listings h3 {
            font-size: 1.8rem;
            color: #1e3a8a;
            margin-bottom: 1rem;
        }
        #login-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        #login-modal.active {
            display: flex;
        }
        .login-content {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            text-align: center;
            width: 300px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }
        .login-content h3 {
            margin-bottom: 1rem;
            color: #1e3a8a;
        }
        .login-content input {
            display: block;
            width: 100%;
            padding: 0.5rem;
            margin-bottom: 1rem;
            border: 1px solid #ccc;
            border-radius: 5px;
            outline: none;
        }
        .login-content button {
            padding: 0.5rem 1rem;
            background: #c80000;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        .login-content button:hover {
            background: #960000;
        }
        .close-btn {
            margin-top: 1rem;
            color: #666;
            cursor: pointer;
            text-decoration: underline;
        }
        .footer {
            background: #000000;
            color: white;
            padding: 2rem;
            text-align: left;
            flex-shrink: 0;
            width: 100%;
            position: relative;
            z-index: 50; /* Pastikan footer terlihat di atas konten yang digeser */
        }
        .footer .footer-content {
            display: flex;
            justify-content: space-between;
            max-width: 1200px;
            margin: 0 auto;
            flex-wrap: wrap;
        }
        .footer .footer-section {
            margin-bottom: 1rem;
        }
        .footer .footer-section h4 {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }
        .footer .footer-section ul {
            list-style: none;
        }
        .footer .footer-section ul li {
            margin-bottom: 0.3rem;
        }
        .footer .footer-section ul li a {
            color: white;
            text-decoration: none;
        }
        .footer .footer-section ul li a:hover {
            text-decoration: underline;
        }
        .footer .footer-section ul li a.button {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: #c80000;
            color: white;
            text-decoration: none;
            border-radius: 20px;
            cursor: pointer;
            text-align: left;
            width: fit-content;
        }
        .footer .footer-section ul li a.button:hover {
            background: #960000;
            text-decoration: none;
        }
        .footer .footer-bottom {
            text-align: center;
            margin-top: 1rem;
            font-size: 0.9rem;
        }
        .gallery {
            margin-bottom: 2rem;
        }
        .gallery .grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        .gallery .card {
            background: white;
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        .gallery .card:hover {
            transform: translateY(-5px);
        }
        .gallery .card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 5px;
        }
        .gallery .card p {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0.5rem;
        }
        .community .community-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem;
        }
        .community .button {
            display: inline-block;
            padding: 0.75rem 2rem;
            color: white;
            text-decoration: none;
            border-radius: 25px;
            cursor: pointer;
            transition: background 0.3s ease, transform 0.3s ease;
            position: relative;
            z-index: 10;
            pointer-events: auto;
        }
        .community .discord-btn {
            background: #7289DA;
        }
        .community .discord-btn:hover {
            background: #677BC4;
            transform: translateY(-3px);
        }
        .community .roblox-btn {
            background: #00B2FF;
        }
        .community .roblox-btn:hover {
            background: #0095D8;
            transform: translateY(-3px);
        }

        /* CSS for highlight */
        .highlight {
            background-color: yellow;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .header .nav-menu {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: #000000;
                padding: 1rem;
                text-align: center;
            }
            .header .nav-menu.active {
                display: flex;
            }
            .header .nav a {
                margin: 0.5rem 0;
                display: block;
            }
            .header .menu-toggle {
                display: block;
            }
            .header .search {
                display: none;
            }
            .community .community-buttons {
                flex-direction: column;
                gap: 0.5rem;
            }
            .community .button {
                width: 100%;
                max-width: 300px;
                margin: 0 auto;
            }
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <div class="header">
        <div class="logo">FN | Fullstate Network</div>
        <div class="nav" id="nav">
            <div class="menu-toggle" onclick="toggleMenu()">‚ò∞</div>
            <div class="nav-menu" id="nav-menu">
                <a onclick="showPage('home')" class="active">Beranda</a>
                <a onclick="showPage('profile')">Profil</a>
                <a onclick="showPage('news-list')">Berita</a>
                <a onclick="showPage('community')">Komunitas</a>
            </div>
        </div>
        <div class="search">
            <input type="text" id="search-input" placeholder="Cari Berita...">
            <button id="search-button">üîç</button>
        </div>
    </div>

    <div class="main-content-wrapper" id="main-content-wrapper">
        <div id="home" class="content active">
            <div class="hero">
                <h1>SELALU UPDATE SETIAP SAAT</h1>
                <p>Fullstate Network adalah platform terpercaya yang menyiarkan berita di Fullstate, memberikan informasi terkini setiap saat.</p>
                <div class="buttons">
                    <button id="check-news-btn" class="check-btn" onclick="showPage('news-list')">Cek Berita Terbaru</button>
                </div>
            </div>
            <div class="services">
                <h2>LAYANAN BERITA</h2>
                <div class="grid">
                    <div class="card">
                        <img src="Newspaper Icon.png" alt="Berita Menarik">
                        <h3>BERITA MENARIK</h3>
                        <p>Akses berita menarik dengan cepat dan mudah.</p>
                    </div>
                    <div class="card">
                        <img src="Live Camera Icon.png" alt="Live Update">
                        <h3>LIVE UPDATE</h3>
                        <p>Dapatkan pembaruan berita langsung dengan proses yang efisien.</p>
                    </div>
                    <div class="card">
                        <img src="Arsip Berita.png" alt="Arsip Berita">
                        <h3>ARSIP BERITA</h3>
                        <p>Akses arsip berita melalui platform digital kami.</p>
                    </div>
                </div>
            </div>
            <div class="announcements">
                <h2>PENGUMUMAN</h2>
                <div class="grid">
                    <div class="card">
                        <img src="Pengumuman\Pengumuman1.png" alt="Pengumuman 1">
                        <p>Untuk saat ini belum ada pengumuman yang diberikan oleh Fullstate Network.</p>
                    </div>
                    <div class="card">
                        <img src="Pengumuman\Pengumuman2.png" alt="Pengumuman 2">
                        <p>Untuk saat ini belum ada pengumuman yang diberikan oleh Fullstate Network.</p>
                    </div>
                </div>
            </div>
        </div>
        <div id="profile" class="content">
            <div class="profile">
                <h2>Profil Fullstate Network</h2>
                <p>Fullstate Network adalah penyiar berita terkemuka di Fullstate, berkomitmen untuk menyampaikan informasi yang akurat dan terpercaya. Kami telah melayani masyarakat sejak 2022, dengan tim jurnalis berpengalaman yang berdedikasi untuk mengungkap kebenaran.</p>
                <div class="profile-highlight">
                    <div class="news-item">
                        <img src="Dir.png" alt="Direktur">
                        <div class="info">
                            <span class="category">Direktur</span>
                            <span class="date"></span>
                            <h3>Ven Christopher S. Ds, M. Ds</h3>
                            <p>Direktur Fullstate Network.</p>
                        </div>
                    </div>
                    <div class="news-item">
                        <img src="Wadir.png" alt="Wakil Direktur">
                        <div class="info">
                            <span class="category">Wakil Direktur</span>
                            <span class="date"></span>
                            <h3>H. Armando Jann R. S.T</h3>
                            <p>Wakil Direktur Fullstate Network.</p>
                        </div>
                    </div>
                    <div class="news-item">
                        <img src="Kadir.png" alt="Kepala Direksi">
                        <div class="info">
                            <span class="category">Kepala Direksi</span>
                            <span class="date"></span>
                            <h3>Bariq Wicaksono</h3>
                            <p>Kepala Direksi Fullstate Network.</p>
                        </div>
                    </div>
                    <div class="news-item">
                        <img src="Wakadir.png" alt="Wakil Kepala Direksi">
                        <div class="info">
                            <span class="category">Wakil Kepala Direksi</span>
                            <span class="date"></span>
                            <h3>Welly Dj</h3>
                            <p>Wakil Kepala Direksi Fullstate Network.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="news-list" class="content">
            <h2>Berita Terkini</h2>
            <div class="news-items" id="news-items">
            </div>
        </div>
        <div id="community" class="content">
            <div class="community">
                <div class="gallery">
                    <h2>Galeri</h2>
                    <div class="grid">
                        <div class="card"><img src="Galeri\Gambar1.png" alt="Gambar 1"><p>Untuk saat ini belum ada gambar yang ditampilkan di galeri kami.</p></div>
                        <div class="card"><img src="Galeri\Gambar2.png" alt="Gambar 2"><p>Untuk saat ini belum ada gambar yang ditampilkan di galeri kami.</p></div>
                        <div class="card"><img src="Galeri\Gambar3.png" alt="Gambar 3"><p>Untuk saat ini belum ada gambar yang ditampilkan di galeri kami.</p></div>
                        <div class="card"><img src="Galeri\Gambar4.png" alt="Gambar 4"><p>Untuk saat ini belum ada gambar yang ditampilkan di galeri kami.</p></div>
                        <div class="card"><img src="Galeri\Gambar5.png" alt="Gambar 5"><p>Untuk saat ini belum ada gambar yang ditampilkan di galeri kami.</p></div>
                        <div class="card"><img src="Galeri\Gambar6.png" alt="Gambar 6"><p>Untuk saat ini belum ada gambar yang ditampilkan di galeri kami.</p></div>
                        <div class="card"><img src="Galeri\Gambar7.png" alt="Gambar 7"><p>Untuk saat ini belum ada gambar yang ditampilkan di galeri kami.</p></div>
                        <div class="card"><img src="Galeri\Gambar8.png" alt="Gambar 8"><p>Untuk saat ini belum ada gambar yang ditampilkan di galeri kami.</p></div>
                        <div class="card"><img src="Galeri\Gambar9.png" alt="Gambar 9"><p>Untuk saat ini belum ada gambar yang ditampilkan di galeri kami.</p></div>
                    </div>
                </div>
                <h2>Komunitas Fullstate Network</h2>
                <p>Bergabunglah dengan komunitas kami untuk berbagi cerita, diskusi, dan informasi. Fullstate Network mendukung komunitas yang aktif dan terhubung, tempat Anda bisa berpartisipasi dalam berbagai kegiatan sosial dan jurnalisme warga.</p>
                <div class="community-buttons">
                    <a href="https://discord.gg/UMcvyaMn6s" class="button discord-btn" target="_blank">Discord Fullstate Network</a>
                    <a href="https://discord.gg/kotafullstate" class="button discord-btn" target="_blank">Discord Kota Fullstate</a>
                    <a href="https://www.roblox.com/games/93242192529674/KOTA-FULLSTATE" class="button roblox-btn" target="_blank">Kota Fullstate</a>
                </div>
            </div>
        </div>
        <div id="admin" class="content">
            <div class="admin">
                <h2>Panel Admin</h2>
                <div class="add-news">
                    <button onclick="toggleAddNewsForm()">Tambah Berita</button>
                    <form id="add-news-form" style="display: none;">
                        <select name="category" id="news-category" required>
                            <option value="" disabled selected>Pilih Kategori</option>
                            <option value="accident">Kecelakaan</option>
                            <option value="politic">Politik</option>
                            <option value="sport">Olahraga</option>
                            <option value="art">Seni</option>
                            <option value="information">Informasi</option>
                            <option value="fight">Perang/Pertempuran</option>
                            <option value="traffic">Lalu Lintas</option>
                            <option value="other">Lainnya</option>
                        </select>
                        <input type="text" id="news-title" placeholder="Judul Berita" required>
                        <textarea id="news-content" placeholder="Isi Berita" rows="4" required></textarea>
                        <input type="text" id="news-image-url" placeholder="Masukkan Direct Link dari Imgbox atau Imgur (contoh: https://thumbs2.imgbox.com/ab/cd/efgh1234_t.jpg atau https://i.imgur.com/abcd123.jpg)" required>
                        <p>Cara mendapatkan Direct Link:<br>
                        <strong>Imgbox:</strong><br>
                        1. Buka situs Imgbox (cari "Imgbox image hosting" di mesin pencari).<br>
                        2. Klik "Upload" dan pilih gambar dari perangkat Anda (maksimal 10 MB).<br>
                        3. Setelah selesai, salin "Direct Link" (biasanya berakhiran .jpg atau .png).<br>
                        <strong>Imgur:</strong><br>
                        1. Buka situs Imgur (cari "Imgur image hosting" di mesin pencari).<br>
                        2. Klik "New Post" atau "Upload" dan pilih gambar dari perangkat Anda.<br>
                        3. Setelah diunggah, klik kanan pada gambar dan pilih "Copy Image Address" atau salin link langsung (biasanya berakhiran .jpg atau .png).<br>
                        4. Tempelkan tautan tersebut di kolom ini.</p>
                        <button type="submit">Kirim Berita</button>
                    </form>
                </div>
                <div class="news-list" id="admin-news-list">
                </div>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
        </div>
    </div> <div class="static-content-wrapper" id="static-content-wrapper">
        <div id="recruitment" class="content">
            <div class="recruitment">
                <h2>Rekrutmen Fullstate Network</h2>
                <p>Bergabunglah dengan tim kami di Fullstate Network! Kami sedang mencari individu yang bersemangat dan berdedikasi untuk menjadi bagian dari penyiar berita terkemuka di Kota Fullstate. Lihat posisi yang tersedia di bawah ini dan cek jadwal interviewnya.</p>
                <div class="job-listings">
                    <h3>Posisi yang Tersedia</h3>
                    <div class="grid">
                        <div class="card">
                            <h3>Reporter Lapangan</h3>
                            <p>Kami mencari reporter yang dapat mengambil gambar di lapangan dengan kualitas tinggi dan mudah diketahui.</p>
                        </div>
                        <div class="card">
                            <h3>None</h3>
                            <p>Belum ada posisi lain yang ditentukan oleh Direktur Fullstate Network.</p>
                        </div>
                        <div class="card">
                            <h3>None</h3>
                            <p>Belum ada posisi lain yang ditentukan oleh Direktur Fullstate Network.</p>
                        </div>
                    </div>
                </div>
                <p>Untuk mendaftar silakan cek <a href="https://discord.gg/F3VncWG53t">Informasi Pendaftaran</a> dan tunggu <a href="https://discord.gg/cUxBMkB9Uc">Hasil Kelulusan</a> anda.</p>
            </div>
        </div>
        <div id="news-detail-container" class="content">
            </div>
    </div> <div id="login-modal">
        <div class="login-content">
            <h3>Login Admin</h3>
            <input type="text" id="username" placeholder="Username">
            <input type="password" id="password" placeholder="Password">
            <button onclick="login()">Login</button>
            <div class="close-btn" onclick="closeLoginModal()">Tutup</div>
        </div>
    </div>
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>Tautan</h4>
                <ul>
                    <li><a href="#" class="button" onclick="showLoginModal()">Login Admin</a></li>
                    <li><a href="#" class="button" onclick="showPage('recruitment')">Recruitment</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Jam Operasional</h4>
                <ul>
                    <li>Senin - Minggu: 15:00 - 21:30 (OOC)</li>
                    <li>Senin - Minggu: 00:00 - 24:00 (IC)</li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Alamat</h4>
                <ul>
                    <li>Saat ini alamat belum tersedia untuk Fullstate Network dan akan segera kami tambahkan apabila telah mendapat gedung di kota.</li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            ¬©2025 FN | Fullstate Network<br>
        </div>
    </footer>
    <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCNuLH9W-LqSkyLgZyqGzzXi_q50pb7bXQ",
            authDomain: "fullstate-network.firebaseapp.com",
            projectId: "fullstate-network",
            storageBucket: "fullstate-network.firebasestorage.app",
            messagingSenderId: "538971846872",
            appId: "1:538971846872:web:4c7f49386e5325f8eebfad",
            measurementId: "G-4SG58WYT4G"
        };
        let db;
        try {
            firebase.initializeApp(firebaseConfig);
            db = firebase.firestore();
        } catch (error) {
            alert("Gagal menginisialisasi Firebase. Fitur berita mungkin tidak berfungsi, tetapi navigasi tetap dapat digunakan.");
            console.error("Firebase initialization error:", error);
        }
        let isLoggedIn = false;
        let newsData = []; // Ini akan menyimpan semua data berita
        const mainNavPages = ['home', 'profile', 'news-list', 'community', 'admin']; // Pages with slide animation
        const staticPages = ['recruitment']; // Pages without slide animation
        let currentPageType = 'main'; // 'main' or 'static'
        let currentStaticPageId = null; // To keep track of which static page is active

        if (sessionStorage.getItem('isLoggedIn') === 'true') {
            isLoggedIn = true;
        }
        const categoryTranslations = {
            'accident': 'Kecelakaan',
            'politic': 'Politik',
            'sport': 'Olahraga',
            'art': 'Seni',
            'information': 'Informasi',
            'fight': 'Perang/Pertempuran',
            'traffic': 'Lalu Lintas',
            'other': 'Lainnya'
        };
        function getTranslatedCategory(category) {
            return categoryTranslations[category.toLowerCase()] || category.charAt(0).toUpperCase() + category.slice(1);
        }

        // Fungsi bantu untuk menyorot teks
        function highlightText(text, searchTerm) {
            if (!searchTerm) return text; // Jika tidak ada search term, kembalikan teks asli
            // Escape karakter khusus dalam searchTerm untuk digunakan dalam regex
            const escapedSearchTerm = searchTerm.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
            const regex = new RegExp(`(${escapedSearchTerm})`, 'gi'); // 'gi' untuk global dan case-insensitive
            return text.replace(regex, '<span class="highlight">$1</span>');
        }

        function showPage(pageId) {
            const mainContentWrapper = document.getElementById('main-content-wrapper');
            const staticContentWrapper = document.getElementById('static-content-wrapper');
            if (!mainContentWrapper || !staticContentWrapper) {
                console.error("Salah satu wrapper konten tidak ditemukan.");
                return;
            }

            // Hide all content sections first
            document.querySelectorAll('.content').forEach(content => {
                content.classList.remove('active');
            });
            mainContentWrapper.classList.remove('hidden');
            staticContentWrapper.classList.remove('active');

            // --- Handle Main Navigation Pages (with slide animation) ---
            if (mainNavPages.includes(pageId)) {
                if (pageId === 'admin' && !isLoggedIn) {
                    alert('Silakan login sebagai admin untuk mengakses panel ini.');
                    showPage('home');
                    return;
                }

                currentPageType = 'main';
                let targetPageIndex = mainNavPages.indexOf(pageId);
                mainContentWrapper.style.transform = `translateX(${-targetPageIndex * 100}vw)`;
                document.getElementById(pageId).classList.add('active'); // This 'active' is for content internal display logic, not for show/hide.

                // Update active navigation link in header
                document.querySelectorAll('.nav a').forEach(link => {
                    link.classList.remove('active');
                });
                const navLinks = document.querySelectorAll('.nav a');
                navLinks.forEach(link => {
                    const onclickAttr = link.getAttribute('onclick');
                    if (onclickAttr && onclickAttr.includes(`showPage('${pageId}')`)) {
                        link.classList.add('active');
                    }
                });

                if (pageId === 'admin') {
                    const addNewsSection = document.querySelector('#admin .add-news');
                    if (addNewsSection) {
                        addNewsSection.classList.add('active');
                        if (db) loadAdminNewsList();
                    } else {
                        console.error("Elemen '.add-news' tidak ditemukan di halaman admin.");
                    }
                } else {
                    const addNewsForm = document.getElementById('add-news-form');
                    if (addNewsForm) {
                        addNewsForm.style.display = 'none';
                    }
                }
                if (pageId === 'news-list' && db) {
                    // Saat masuk halaman news-list, pastikan input pencarian di-reset
                    const searchInput = document.getElementById('search-input');
                    if (searchInput) searchInput.value = '';
                    loadNews(); // Panggil loadNews yang akan merender semua berita
                }

            }
            // --- Handle Static Pages (no slide animation) ---
            else if (staticPages.includes(pageId)) {
                currentPageType = 'static';
                mainContentWrapper.classList.add('hidden'); // Hide main content
                staticContentWrapper.classList.add('active'); // Show static content wrapper
                document.getElementById(pageId).classList.add('active'); // Show specific static page

                currentStaticPageId = pageId; // Keep track of the currently active static page

                // No active link update in header for static pages
                document.querySelectorAll('.nav a').forEach(link => {
                    link.classList.remove('active');
                });
            }
            // --- Handle News Detail Page (also static) ---
            else if (pageId.startsWith('news-detail-')) { // Assuming news detail IDs will be news-detail-XYZ
                currentPageType = 'static';
                mainContentWrapper.classList.add('hidden');
                staticContentWrapper.classList.add('active');

                const news = newsData.find(n => n.id === pageId.replace('news-detail-', ''));
                if (!news) {
                    showPage('news-list'); // Fallback if news not found
                    return;
                }

                let newsDetailDiv = document.getElementById('news-detail-container');
                if (!newsDetailDiv) {
                    console.error("Elemen 'news-detail-container' tidak ditemukan.");
                    return;
                }

                // Dapatkan search term yang terakhir digunakan (jika ada)
                const lastSearchInput = document.getElementById('search-input');
                const lastSearchTerm = lastSearchInput ? lastSearchInput.value.toLowerCase().trim() : '';

                // Sorot judul dan konten penuh di halaman detail
                const highlightedDetailTitle = highlightText(news.title, lastSearchTerm);
                const highlightedDetailContent = highlightText(news.content, lastSearchTerm);

                newsDetailDiv.innerHTML = `
                    <div class="news-detail">
                        <img src="${news.image}" alt="${getTranslatedCategory(news.category)}" onerror="this.onerror=null; this.src='https://via.placeholder.com/800x300?text=${getTranslatedCategory(news.category)}';">
                        <h3>${highlightedDetailTitle}</h3> <p>${highlightedDetailContent}</p> <div class="button-group">
                            <a class="back-btn" onclick="showPage('news-list')">Kembali</a>
                            <button class="delete-btn" onclick="deleteNews('${news.id}')">Hapus Berita</button>
                        </div>
                    </div>
                `;
                newsDetailDiv.classList.add('active');
                newsDetailDiv.dataset.currentNewsId = news.id;
                currentStaticPageId = 'news-detail-container';

                // No active link update in header for news detail
                document.querySelectorAll('.nav a').forEach(link => {
                    link.classList.remove('active');
                });
            } else {
                console.warn(`Halaman dengan ID '${pageId}' tidak dikenali.`);
                showPage('home'); // Fallback to home
            }

            updateNavigation(); // Update admin link visibility in nav
            updateDeleteButtonsVisibility(); // Update delete buttons visibility

            if (window.innerWidth <= 768) {
                toggleMenu(); // Close mobile menu after selection
            }
        }

        function showLoginModal() {
            const modal = document.getElementById('login-modal');
            if (modal) {
                modal.classList.add('active');
            } else {
                console.error("Elemen modal login tidak ditemukan.");
            }
        }
        function closeLoginModal() {
            const modal = document.getElementById('login-modal');
            if (modal) {
                modal.classList.remove('active');
                const usernameInput = document.getElementById('username');
                const passwordInput = document.getElementById('password');
                if (usernameInput) usernameInput.value = '';
                if (passwordInput) passwordInput.value = '';
            } else {
                console.error("Elemen modal login tidak ditemukan.");
            }
        }
        function login() {
            const username = document.getElementById('username')?.value;
            const password = document.getElementById('password')?.value;
            if (!username || !password) {
                alert('Mohon masukkan username dan password.');
                return;
            }
            if (username === 'FULLSTATENETWORK' && password === 'FULLSTATENETWORKJAYASELAMANYA') {
                alert('Login berhasil! Selamat datang, Admin!');
                isLoggedIn = true;
                sessionStorage.setItem('isLoggedIn', 'true');
                closeLoginModal();
                updateNavigation();
                showPage('admin');
                updateDeleteButtonsVisibility();
            } else {
                alert('Username atau password salah!');
            }
        }
        function toggleAddNewsForm() {
            const form = document.getElementById('add-news-form');
            if (form) {
                if (form.style.display === 'none' || form.style.display === '') {
                    form.style.display = 'block';
                } else {
                    form.style.display = 'none';
                }
            } else {
                console.error("Form 'add-news-form' tidak ditemukan.");
            }
        }
        function formatDateTime() {
            const now = new Date();
            const days = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
            const day = days[now.getDay()];
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const date = now.getDate();
            const months = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];
            const month = months[now.getMonth()];
            const year = now.getFullYear();
            return `${day}, ${hours}:${minutes} WIB, ${date} ${month} ${year}`;
        }
        async function addNews(event) {
            event.preventDefault();
            if (!db) {
                alert('Firebase tidak tersedia. Tidak dapat menambahkan berita.');
                return;
            }
            const category = document.getElementById('news-category')?.value;
            const title = document.getElementById('news-title')?.value;
            const content = document.getElementById('news-content')?.value;
            let imageUrl = document.getElementById('news-image-url')?.value;
            if (!category || !title || !content || !imageUrl) {
                alert('Semua field harus diisi!');
                return;
            }
            imageUrl = imageUrl.trim();
            const isImgbox = imageUrl.includes('imgbox.com');
            const isImgur = imageUrl.includes('imgur.com');
            if (!(isImgbox || isImgur) || !/\.(jpg|jpeg|png|gif)$/i.test(imageUrl)) {
                alert('Harap masukkan Direct Link yang valid dari Imgbox atau Imgur (contoh: https://thumbs2.imgbox.com/ab/cd/efgh1234_t.jpg atau https://i.imgur.com/abcd123.jpg). Pastikan URL berakhiran .jpg, .jpeg, .png, atau .gif.');
                return;
            }
            try {
                const dateTime = formatDateTime();
                const newNews = {
                    category: category,
                    title: title,
                    content: content,
                    dateTime: dateTime,
                    image: imageUrl,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                };
                const docRef = await db.collection('news').add(newNews);
                const newNewsId = docRef.id;
                await docRef.update({ id: newNewsId });
                
                if (db) {
                    loadNews(); // Muat ulang berita untuk user
                    loadAdminNewsList(); // Muat ulang berita untuk admin panel
                }
                alert('Berita berhasil ditambahkan!');
                document.getElementById('add-news-form').reset();
                toggleAddNewsForm();
                showPage('news-list'); // Arahkan ke halaman berita setelah tambah
                updateDeleteButtonsVisibility();
            } catch (error) {
                alert('Gagal menambahkan berita. Silakan coba lagi.');
                console.error("Error adding news:", error);
            }
        }

        // Fungsi bantu untuk merender daftar berita (baik semua atau yang difilter)
        function renderNewsList(newsToRender, currentSearchTerm = '') { // Tambahkan parameter currentSearchTerm
            const newsItemsContainer = document.getElementById('news-items');
            if (!newsItemsContainer) return; // Kembali jika container tidak ditemukan

            newsItemsContainer.innerHTML = ''; // Kosongkan sebelum mengisi ulang

            if (newsToRender.length === 0) {
                newsItemsContainer.innerHTML = '<p style="text-align: center; color: #666; margin-top: 2rem;">Tidak ada berita yang cocok dengan pencarian Anda.</p>';
                return;
            }

            newsToRender.forEach(news => {
                const newNewsItem = document.createElement('div');
                newNewsItem.className = 'news-item';
                // Pass full news ID to showNewsDetail
                newNewsItem.onclick = () => showPage(`news-detail-${news.id}`);

                // Sorot judul dan sebagian konten
                const highlightedTitle = highlightText(news.title, currentSearchTerm);
                const highlightedContentSnippet = highlightText(news.content.substring(0, 50), currentSearchTerm); // Sorot hanya snippet

                newNewsItem.innerHTML = `
                    <img src="${news.image}" alt="${getTranslatedCategory(news.category)}" onerror="this.onerror=null; this.src='https://via.placeholder.com/60x60?text=${getTranslatedCategory(news.category)}';">
                    <div class="info">
                        <span class="category">${getTranslatedCategory(news.category)}</span>
                        <span class="date">${news.dateTime}</span>
                        <h3>${highlightedTitle}</h3> <p>${highlightedContentSnippet}...</p> </div>
                    <button class="delete-btn" onclick="event.stopPropagation(); deleteNews('${news.id}')">Hapus Berita</button>
                `;
                newsItemsContainer.appendChild(newNewsItem);
            });
            updateDeleteButtonsVisibility(); // Pastikan tombol hapus diperbarui
        }

        async function loadNews() {
            if (!db) {
                console.warn("Firebase Firestore tidak tersedia, tidak dapat memuat berita.");
                return;
            }
            try {
                // Mengambil semua berita dan menyimpannya di newsData
                const snapshot = await db.collection('news')
                    .orderBy('createdAt', 'desc')
                    .get();
                newsData = []; // Reset newsData
                snapshot.forEach(doc => {
                    const news = doc.data();
                    newsData.push(news);
                });
                renderNewsList(newsData, ''); // Panggil renderNewsList dengan searchTerm kosong
            } catch (error) {
                alert('Gagal memuat berita. Periksa konsol untuk detail lebih lanjut.');
                console.error("Error loading news:", error);
            }
        }

        function searchNews() {
            const searchTerm = document.getElementById('search-input')?.value.toLowerCase().trim();

            if (searchTerm === '') {
                renderNewsList(newsData, ''); // Jika kosong, tidak ada highlight
            } else {
                const filteredNews = newsData.filter(news =>
                    news.title.toLowerCase().includes(searchTerm) ||
                    getTranslatedCategory(news.category).toLowerCase().includes(searchTerm)
                );
                renderNewsList(filteredNews, searchTerm); // Teruskan searchTerm
            }
        }

        async function loadAdminNewsList() {
            if (!db) {
                console.warn("Firebase Firestore tidak tersedia, tidak dapat memuat daftar berita admin.");
                return;
            }
            try {
                const adminNewsList = document.getElementById('admin-news-list');
                if (!adminNewsList) {
                    console.error("Elemen 'admin-news-list' tidak ditemukan.");
                    return;
                }
                adminNewsList.innerHTML = '';
                const snapshot = await db.collection('news')
                    .orderBy('createdAt', 'desc')
                    .get();
                snapshot.forEach(doc => {
                    const news = doc.data();
                    const newsItem = document.createElement('div');
                    newsItem.className = 'news-item';
                    newsItem.innerHTML = `
                        <div class="info">
                            <span class="category">${getTranslatedCategory(news.category)}</span>
                            <span class="date">${news.dateTime}</span>
                            <h3>${news.title}</h3>
                            <p>${news.content.substring(0, 50)}...</p>
                        </div>
                        <button onclick="deleteNews('${news.id}')">Hapus Berita</button>
                    `;
                    adminNewsList.appendChild(newsItem);
                });
            } catch (error) {
                console.error("Error loading admin news list:", error);
            }
        }
        async function deleteNews(newsId) {
            if (!db) {
                alert('Firebase tidak tersedia. Tidak dapat menghapus berita.');
                return;
            }
            if (confirm('Apakah Anda yakin ingin menghapus berita ini?')) {
                try {
                    await db.collection('news').doc(newsId).delete();
                    
                    // Remove from newsData array
                    newsData = newsData.filter(n => n.id !== newsId);

                    // If currently on a news detail page of the deleted news, redirect
                    const newsDetailDiv = document.getElementById('news-detail-container');
                    if (newsDetailDiv && newsDetailDiv.dataset.currentNewsId === newsId) {
                        showPage('news-list'); // Go back to news list
                    }
                    
                    if (db) {
                        loadAdminNewsList();
                        loadNews(); // Muat ulang berita untuk user
                    }
                    
                    alert('Berita berhasil dihapus!');
                    // Ensure the current page is re-rendered correctly
                    // Logika ini mungkin tidak perlu jika showPage('news-list') sudah dipanggil
                    // Namun, kita tetap memastikan halaman ditampilkan dengan benar
                    if (currentPageType === 'main') {
                         const currentActiveNavLink = document.querySelector('.nav a.active');
                         if (currentActiveNavLink) {
                             const activePageId = currentActiveNavLink.getAttribute('onclick').match(/'(.*?)'/)[1];
                             showPage(activePageId);
                         } else {
                             showPage('home'); // Fallback jika tidak ada link aktif
                         }
                    } else { // If on a static page, refresh the content
                        showPage(currentStaticPageId || 'home'); // Go to current static page or home
                    }
                } catch (error) {
                    alert('Gagal menghapus berita. Silakan coba lagi.');
                    console.error("Error deleting news:", error);
                }
            }
        }
        function updateDeleteButtonsVisibility() {
            const deleteButtons = document.querySelectorAll('.delete-btn');
            deleteButtons.forEach(button => {
                if (isLoggedIn) {
                    button.classList.add('visible');
                } else {
                    button.classList.remove('visible');
                }
            });
        }
        function updateNavigation() {
            const navMenu = document.getElementById('nav-menu');
            if (!navMenu) {
                console.error("Elemen 'nav-menu' tidak ditemukan untuk memperbarui navigasi.");
                return;
            }
            const existingAdminLink = navMenu.querySelector('a[onclick="showPage(\'admin\')"]');
            if (isLoggedIn) {
                if (!existingAdminLink) {
                    const adminLink = document.createElement('a');
                    adminLink.textContent = 'Admin';
                    adminLink.setAttribute('onclick', "showPage('admin')");
                    navMenu.appendChild(adminLink);
                    // Ensure 'admin' is in mainNavPages if not already
                    if (!mainNavPages.includes('admin')) {
                        mainNavPages.push('admin'); // Or insert at specific index
                    }
                }
            } else {
                if (existingAdminLink) {
                    navMenu.removeChild(existingAdminLink);
                    // Remove 'admin' from mainNavPages
                    const indexToRemove = mainNavPages.indexOf('admin');
                    if (indexToRemove > -1) {
                        mainNavPages.splice(indexToRemove, 1);
                    }
                }
            }
             // Dynamically set the width of main-content-wrapper based on mainNavPages length
            const mainContentWrapper = document.getElementById('main-content-wrapper');
            if (mainContentWrapper) {
                mainContentWrapper.style.width = `${mainNavPages.length * 100}vw`;
            }
        }
        function logout() {
            isLoggedIn = false;
            sessionStorage.removeItem('isLoggedIn');
            updateNavigation();
            updateDeleteButtonsVisibility();
            alert('Logout berhasil!');
            showPage('home');
        }
        function toggleMenu() {
            const navMenu = document.getElementById('nav-menu');
            if (navMenu) {
                navMenu.classList.toggle('active');
            } else {
                console.error("Elemen 'nav-menu' tidak ditemukan untuk mengalihkan menu.");
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('add-news-form');
            if (form) {
                form.addEventListener('submit', addNews);
            } else {
                console.error("Form 'add-news-form' tidak ditemukan.");
            }
            
            showPage('home'); // Initial page load
            if (db) {
                loadNews(); // Load news when the page loads
            } else {
                console.warn("Firebase Firestore tidak diinisialisasi, berita tidak akan dimuat.");
            }
            updateNavigation(); // Update navigation on load

            const searchInput = document.getElementById('search-input');
            const searchButton = document.getElementById('search-button');

            if (searchInput && searchButton) {
                // Ketika tombol cari diklik
                searchButton.addEventListener('click', () => {
                    // Jika kita tidak di halaman berita, pindah dulu ke halaman berita
                    if (document.querySelector('.main-content-wrapper .content.active')?.id !== 'news-list') {
                        showPage('news-list');
                        // Berikan sedikit delay untuk memastikan transisi selesai sebelum pencarian
                        setTimeout(searchNews, 550); // Sesuaikan delay dengan transisi CSS (0.5s + sedikit lebih)
                    } else {
                        searchNews();
                    }
                });

                // Ketika Enter ditekan di kolom pencarian
                searchInput.addEventListener('keypress', (event) => {
                    if (event.key === 'Enter') {
                        event.preventDefault(); // Mencegah form submit default jika ada
                        if (document.querySelector('.main-content-wrapper .content.active')?.id !== 'news-list') {
                            showPage('news-list');
                            setTimeout(searchNews, 550);
                        } else {
                            searchNews();
                        }
                    }
                });
                
                // Tambahkan event listener untuk menghapus pencarian saat input dikosongkan
                searchInput.addEventListener('input', () => {
                    if (searchInput.value.trim() === '') {
                        searchNews(); // Panggil fungsi pencarian untuk mereset tampilan
                    }
                });

            } else {
                console.error("Elemen pencarian tidak ditemukan.");
            }
        });
        window.onerror = function(message, source, lineno, colno, error) {
            console.error('Terjadi kesalahan pada skrip:', message, 'at', source, 'line', lineno, 'col', colno, 'Error object:', error);
            alert('Terjadi kesalahan pada skrip. Silakan periksa konsol browser untuk detail lebih lanjut.');
        };
    </script>
</body>
</html>
